levis:
  name: "nginx"
  namespace: "kubeops"
  deployment:
    name: "nginx"
    labels:
      app: nginx
      run: nginx
    annotations:
      app: nginx
      nginx.master: "true"
    serviceAccount: microservice
    revisionHistoryLimit: 5
    replicas: 3
    strategy: 
      type: RollingUpdate
      rollingUpdate:
        maxSurge: "80%"
        maxUnavailable: "20%"
    matchLabels:
      app: nginx
      run: nginx
    containers:
      name: "nginx"
      image: "nginx"
      imagePullPolicy: Always
      port: 8080
      env:
        app: nginx
      resources:
        requests:
          memory: "64Mi"
          cpu: "250m"
        limits:
          memory: "128Mi"
          cpu: "500m"
      livenessProbe:
        path: /actuator/health/liveness
        port: "8080"
        initialDelaySeconds: 30
        intervalSeconds: 10
        successThreshold: 10
        failureThreshold: 10
        timeoutSeconds: 10
      readinessProbe:
        path: /actuator/health/readiness
        port: "8080"
        initialDelaySeconds: 30
        intervalSeconds: 10
        successThreshold: 10
        failureThreshold: 10
        timeoutSeconds: 10
  service:
    name: "nginx"
    labels:
      app: nginx
    annotations:
      app: nginx
    selector:
      app: nginx
    type: ClusterIP
    ports:
      name: "nginx"
      port: 80
      targetPort: 80